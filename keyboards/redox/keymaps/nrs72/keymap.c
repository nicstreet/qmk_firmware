#include QMK_KEYBOARD_H
#include "quantum.h"

// Define layer names
#define _STD 0
#define _SYM 1
#define _NAV 2
#define _GAM 3
#define _ADJ 4

enum custom_keycodes {
  STD = SAFE_RANGE,
  SYM,
  NAV,
  GAM,
  ADJ,  
};

// Tap Dance declarations
enum {
  TD_SFT_CAPS = 1,
  TD_ENG_HASH = 2,
  TD_WIN_EXPL = 3,
  TD_QIT = 4,
};

//Shortcuts to make the keymap more readable

#define CUST1 LSFT_T(KC_ENT)
#define CUST2 RSFT_T(KC_SPC) 
#define CUST3 TD(TD_SFT_CAPS)

// Tap Dance definitions
qk_tap_dance_action_t tap_dance_actions[] = {
  // Tap once for Left Shift, twice for Caps Lock
  [TD_SFT_CAPS] = ACTION_TAP_DANCE_DOUBLE(KC_LSFT, KC_CAPS),

};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_STD] = LAYOUT(
  //┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐                                           ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
      KC_GESC , KC_1    , KC_2    , KC_3    , KC_4    , KC_5    ,                                             KC_6    , KC_7    , KC_8    , KC_9    , KC_0    , TG(1)   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐                       ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_TAB  , KC_Q    , KC_W    , KC_E    , KC_R    , KC_T    , KC_NO   ,                         KC_NO   , KC_Y    , KC_U    , KC_I    , KC_O    , KC_P    , TG(2)   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤                       ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      CUST3   , KC_A    , KC_S    , KC_D    , KC_F    , KC_G    , KC_NO   ,                         KC_NO   , KC_H    , KC_J    , KC_K    , KC_L    , KC_SCLN , TG(3)   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐   ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_LALT , KC_Z    , KC_X    , KC_C    , KC_V    , KC_B    , KC_PGDN , KC_PGUP ,     KC_HOME , KC_END  , KC_N   ,  KC_M    , KC_COMM , KC_DOT  , KC_UP   , KC_RALT ,
  //├─────────┼─────────┼─────────┼─────────┼─────┬───┴─────┬───┼─────────┼─────────┤   ├─────────┼─────────┼───┬─────┴───┬─────┼─────────┼─────────┼─────────┼─────────┤
      KC_LEAD , KC_LGUI , KC_PSCR , KC_BSLS ,       KC_LCTL ,     CUST1   , KC_DEL  ,     KC_BSPC , CUST2   ,     KC_RCTL ,       KC_SLSH , KC_LEFT , KC_DOWN , KC_RGHT
  //└─────────┴─────────┴─────────┴─────────┘     └─────────┘   └─────────┴─────────┘   └─────────┴─────────┘   └─────────┘     └─────────┴─────────┴─────────┴─────────┘
  ),

  [_SYM] = LAYOUT(
  //┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐                                           ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
      _______ , KC_F1   , KC_F2   , KC_F3   , KC_F4   , KC_F5   ,                                             KC_F6   , KC_F7   , KC_F8   , KC_F9   , KC_F10  , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐                       ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , KC_EXLM , KC_AT   , KC_LCBR , KC_RCBR , KC_PIPE , _______ ,                         _______ , KC_PSLS , KC_P7   , KC_P8   , KC_P9   , KC_PMNS , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤                       ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , KC_NUHS , KC_DLR  , KC_LBRC , KC_RBRC , KC_UNDS , _______ ,                         _______ , KC_PAST , KC_P4   , KC_P5   , KC_P6   , KC_PPLS , KC_NO   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐   ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , KC_PERC , KC_CIRC , KC_LPRN , KC_RPRN , KC_TILD , _______ , _______ ,     _______ , _______ , KC_NLCK , KC_P1   , KC_P2   , KC_P3   , KC_PENT , KC_RALT ,
  //├─────────┼─────────┼─────────┼─────────┼─────┬───┴─────┬───┼─────────┼─────────┤   ├─────────┼─────────┼───┬─────┴───┬─────┼─────────┼─────────┼─────────┼─────────┤
      _______ , _______ , _______ , _______ ,       _______ ,     _______ , _______ ,     _______ , _______ ,     KC_PEQL ,       KC_P0   , KC_PDOT , KC_PENT , KC_NO 
  //└─────────┴─────────┴─────────┴─────────┘     └─────────┘   └─────────┴─────────┘   └─────────┴─────────┘   └─────────┘     └─────────┴─────────┴─────────┴─────────┘
  ),

  [_NAV] = LAYOUT(
  //┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐                                           ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
      M(0)    , M(1)    , M(3)    , M(4)    , _______ , _______ ,                                             _______ , _______ , _______ , _______ , _______ , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐                       ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , KC_NO   , KC_MS_U , KC_NO   , KC_WH_U,  KC_NO   , _______ ,                         _______ , KC_NO   , KC_NO   , KC_UP   , KC_NO   , KC_NO   , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤                       ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , KC_MS_L , KC_MS_D , KC_MS_R , KC_WH_D,  KC_NO   , _______ ,                         _______ , KC_NO   , KC_LEFT , KC_DOWN , KC_RGHT , KC_NO   , KC_NO   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐   ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO  ,  KC_NO   , _______ , _______ ,     _______ , _______ , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   ,
  //├─────────┼─────────┼─────────┼─────────┼─────┬───┴─────┬───┼─────────┼─────────┤   ├─────────┼─────────┼───┬─────┴───┬─────┼─────────┼─────────┼─────────┼─────────┤
      _______ , KC_NO   , KC_BTN1 , KC_BTN2 ,       _______ ,     _______ , _______ ,     _______ , _______ ,     KC_NO   ,       KC_NO   , KC_NO   , KC_NO   , KC_NO
  //└─────────┴─────────┴─────────┴─────────┘     └─────────┘   └─────────┴─────────┘   └─────────┴─────────┘   └─────────┘     └─────────┴─────────┴─────────┴─────────┘
  ),

 [_GAM] = LAYOUT(
  //┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐                                           ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
      _______ , _______ , _______ , _______ , _______ , _______ ,                                             _______ , _______ , _______ , _______ , _______ , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐                       ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , _______ , _______ , _______ , _______ , _______ , _______ ,                         _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤                       ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , _______ , _______ , _______ , _______ , _______ , _______ ,                         _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐   ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      _______ , _______ , _______ , _______ , _______ , _______ , _______ , _______ ,     _______ , _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────┬───┴─────┬───┼─────────┼─────────┤   ├─────────┼─────────┼───┬─────┴───┬─────┼─────────┼─────────┼─────────┼─────────┤
      _______ , _______ , _______ , _______ ,       KC_SPC  ,     KC_SPC  , KC_BSPC ,     KC_DEL  , KC_ENT  ,     _______ ,       _______ , _______ , _______ , _______
  //└─────────┴─────────┴─────────┴─────────┘     └─────────┘   └─────────┴─────────┘   └─────────┴─────────┘   └─────────┘     └─────────┴─────────┴─────────┴─────────┘
  ),

  [_ADJ] = LAYOUT(
  //┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐                                           ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
      _______ , KC_F1   , KC_F2   , KC_F3   , KC_F4   , KC_F5   ,                                             KC_F6   , KC_F7   , KC_F8   , KC_F9   , KC_F10  , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐                       ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , RESET   , RGB_M_P , RGB_TOG , RGB_MOD , RGB_HUD , RGB_HUI ,                         RGB_SAD , RGB_SAI , RGB_VAD , RGB_VAI , KC_NO   , KC_NO   , _______ ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤                       ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   ,                         KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   ,
  //├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┐   ┌─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
      KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , _______ , KC_NO   ,     KC_NO   , _______ , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   , KC_NO   ,
  //├─────────┼─────────┼─────────┼─────────┼─────┬───┴─────┬───┼─────────┼─────────┤   ├─────────┼─────────┼───┬─────┴───┬─────┼─────────┼─────────┼─────────┼─────────┤
      _______ , KC_NO   , KC_NO   , KC_NO   ,       KC_NO   ,     KC_NO   , KC_NO   ,     KC_NO   , KC_NO   ,     KC_NO   ,       KC_NO   , KC_NO   , KC_NO   , KC_NO  
  //└─────────┴─────────┴─────────┴─────────┘     └─────────┘   └─────────┴─────────┘   └─────────┴─────────┘   └─────────┘     └─────────┴─────────┴─────────┴─────────┘
  ) 
};

const macro_t *action_get_macro(keyrecord_t *record, uint8_t id, uint8_t opt)
{
      switch(id) {
        case 0:
          return MACRODOWN( DOWN(KC_LCTL), TYPE(KC_B), UP(KC_LCTL), TYPE(KC_0), END );
          break;
        case 1:
          return MACRODOWN( DOWN(KC_LCTL), TYPE(KC_B), UP(KC_LCTL), TYPE(KC_1), END );
          break;
        case 2:
          return MACRODOWN( DOWN(KC_LCTL), TYPE(KC_B), UP(KC_LCTL), TYPE(KC_2), END );
          break;
        case 3:
          return MACRODOWN( DOWN(KC_LCTL), TYPE(KC_B), UP(KC_LCTL), TYPE(KC_3), END );
          break;
    }
    return MACRO_NONE;
};

LEADER_EXTERNS();

void matrix_scan_user(void) {
  LEADER_DICTIONARY() {
    leading = false;
    leader_end();

    SEQ_ONE_KEY(KC_F) {
      // Anything you can do in a macro.
      SEND_STRING("QMK is awesome.");
    }
    SEQ_TWO_KEYS(KC_D, KC_D) {
      SEND_STRING(SS_LCTL("a") SS_LCTL("c"));
    }
    SEQ_THREE_KEYS(KC_D, KC_D, KC_S) {
      SEND_STRING("https://start.duckduckgo.com\n");
    }
    SEQ_TWO_KEYS(KC_A, KC_S) {
      register_code(KC_LGUI);
      register_code(KC_S);
      unregister_code(KC_S);
      unregister_code(KC_LGUI);
    }
  }
}